<instance format="XCSP3" type="COP">
  <variables>
    <array id="x" note="x[i] is the starting time (a constant here to be able to post NoOverlap constraints)" size="[20]">
      <domain for="x[0] x[6] x[8] x[12]"> 4 </domain>
      <domain for="x[1] x[11]"> 7 </domain>
      <domain for="x[2] x[3]"> 8 </domain>
      <domain for="x[4] x[10] x[14] x[17..18]"> 3 </domain>
      <domain for="x[5] x[16]"> 1 </domain>
      <domain for="x[7] x[15]"> 6 </domain>
      <domain for="x[9] x[13] x[19]"> 2 </domain>
    </array>
    <array id="y" note="y[f] is the first counter (index) of the series required by flight f" size="[20]"> 1..65 </array>
    <array id="d" note="d[a] is the maximal distance between two flights of the airline a" size="[3]"> 0..65 </array>
    <var id="z" note="z is the number of used counters"> 5..65 </var>
  </variables>
  <constraints>
    <noOverlap>
      <origins> (x[0],y[0])(x[1],y[1])(x[2],y[2])(x[3],y[3])(x[4],y[4])(x[5],y[5])(x[6],y[6])(x[7],y[7])(x[8],y[8])(x[9],y[9])(x[10],y[10])(x[11],y[11])(x[12],y[12])(x[13],y[13])(x[14],y[14])(x[15],y[15])(x[16],y[16])(x[17],y[17])(x[18],y[18])(x[19],y[19]) </origins>
      <lengths> (4,2)(2,5)(2,1)(2,2)(5,2)(6,1)(3,4)(2,5)(2,4)(5,5)(4,1)(2,5)(5,2)(6,3)(4,3)(2,5)(4,3)(2,3)(6,5)(5,4) </lengths>
    </noOverlap>
    <group note="computing the number of used counters">
      <intension> le(sub(add(%0,%1),1),z) </intension>
      <args> y[0] 2 </args>
      <args> y[1] 5 </args>
      <args> y[2] 1 </args>
      <args> y[3] 2 </args>
      <args> y[4] 2 </args>
      <args> y[5] 1 </args>
      <args> y[6] 4 </args>
      <args> y[7] 5 </args>
      <args> y[8] 4 </args>
      <args> y[9] 5 </args>
      <args> y[10] 1 </args>
      <args> y[11] 5 </args>
      <args> y[12] 2 </args>
      <args> y[13] 3 </args>
      <args> y[14] 3 </args>
      <args> y[15] 5 </args>
      <args> y[16] 3 </args>
      <args> y[17] 3 </args>
      <args> y[18] 5 </args>
      <args> y[19] 4 </args>
    </group>
    <block note="computing the maximal distance between two flights of the same airline">
      <group>
        <sum>
          <list> %0 %1 %2 </list>
          <coeffs> 1 -1 -1 </coeffs>
          <condition> (le,0) </condition>
        </sum>
        <args> y[2] y[3] d[0] </args>
        <args> y[2] y[5] d[0] </args>
        <args> y[2] y[8] d[0] </args>
        <args> y[2] y[11] d[0] </args>
        <args> y[2] y[13] d[0] </args>
        <args> y[5] y[2] d[0] </args>
        <args> y[5] y[3] d[0] </args>
        <args> y[5] y[8] d[0] </args>
        <args> y[5] y[11] d[0] </args>
        <args> y[5] y[13] d[0] </args>
        <args> y[10] y[1] d[1] </args>
        <args> y[10] y[4] d[1] </args>
        <args> y[10] y[6] d[1] </args>
        <args> y[10] y[7] d[1] </args>
        <args> y[10] y[9] d[1] </args>
        <args> y[10] y[12] d[1] </args>
        <args> y[10] y[14] d[1] </args>
        <args> y[10] y[16] d[1] </args>
        <args> y[10] y[19] d[1] </args>
      </group>
      <group>
        <sum>
          <list> %0 %1 %2 </list>
          <coeffs> 1 -1 -1 </coeffs>
          <condition> (le,-1) </condition>
        </sum>
        <args> y[3] y[2] d[0] </args>
        <args> y[3] y[5] d[0] </args>
        <args> y[3] y[8] d[0] </args>
        <args> y[3] y[11] d[0] </args>
        <args> y[3] y[13] d[0] </args>
        <args> y[4] y[1] d[1] </args>
        <args> y[4] y[6] d[1] </args>
        <args> y[4] y[7] d[1] </args>
        <args> y[4] y[9] d[1] </args>
        <args> y[4] y[10] d[1] </args>
        <args> y[4] y[12] d[1] </args>
        <args> y[4] y[14] d[1] </args>
        <args> y[4] y[16] d[1] </args>
        <args> y[4] y[19] d[1] </args>
        <args> y[12] y[1] d[1] </args>
        <args> y[12] y[4] d[1] </args>
        <args> y[12] y[6] d[1] </args>
        <args> y[12] y[7] d[1] </args>
        <args> y[12] y[9] d[1] </args>
        <args> y[12] y[10] d[1] </args>
        <args> y[12] y[14] d[1] </args>
        <args> y[12] y[16] d[1] </args>
        <args> y[12] y[19] d[1] </args>
        <args> y[0] y[15] d[2] </args>
        <args> y[0] y[17] d[2] </args>
        <args> y[0] y[18] d[2] </args>
      </group>
      <group>
        <sum>
          <list> %0 %1 %2 </list>
          <coeffs> 1 -1 -1 </coeffs>
          <condition> (le,-3) </condition>
        </sum>
        <args> y[8] y[2] d[0] </args>
        <args> y[8] y[3] d[0] </args>
        <args> y[8] y[5] d[0] </args>
        <args> y[8] y[11] d[0] </args>
        <args> y[8] y[13] d[0] </args>
        <args> y[6] y[1] d[1] </args>
        <args> y[6] y[4] d[1] </args>
        <args> y[6] y[7] d[1] </args>
        <args> y[6] y[9] d[1] </args>
        <args> y[6] y[10] d[1] </args>
        <args> y[6] y[12] d[1] </args>
        <args> y[6] y[14] d[1] </args>
        <args> y[6] y[16] d[1] </args>
        <args> y[6] y[19] d[1] </args>
        <args> y[19] y[1] d[1] </args>
        <args> y[19] y[4] d[1] </args>
        <args> y[19] y[6] d[1] </args>
        <args> y[19] y[7] d[1] </args>
        <args> y[19] y[9] d[1] </args>
        <args> y[19] y[10] d[1] </args>
        <args> y[19] y[12] d[1] </args>
        <args> y[19] y[14] d[1] </args>
        <args> y[19] y[16] d[1] </args>
      </group>
      <group>
        <sum>
          <list> %0 %1 %2 </list>
          <coeffs> 1 -1 -1 </coeffs>
          <condition> (le,-4) </condition>
        </sum>
        <args> y[11] y[2] d[0] </args>
        <args> y[11] y[3] d[0] </args>
        <args> y[11] y[5] d[0] </args>
        <args> y[11] y[8] d[0] </args>
        <args> y[11] y[13] d[0] </args>
        <args> y[1] y[4] d[1] </args>
        <args> y[1] y[6] d[1] </args>
        <args> y[1] y[7] d[1] </args>
        <args> y[1] y[9] d[1] </args>
        <args> y[1] y[10] d[1] </args>
        <args> y[1] y[12] d[1] </args>
        <args> y[1] y[14] d[1] </args>
        <args> y[1] y[16] d[1] </args>
        <args> y[1] y[19] d[1] </args>
        <args> y[7] y[1] d[1] </args>
        <args> y[7] y[4] d[1] </args>
        <args> y[7] y[6] d[1] </args>
        <args> y[7] y[9] d[1] </args>
        <args> y[7] y[10] d[1] </args>
        <args> y[7] y[12] d[1] </args>
        <args> y[7] y[14] d[1] </args>
        <args> y[7] y[16] d[1] </args>
        <args> y[7] y[19] d[1] </args>
        <args> y[9] y[1] d[1] </args>
        <args> y[9] y[4] d[1] </args>
        <args> y[9] y[6] d[1] </args>
        <args> y[9] y[7] d[1] </args>
        <args> y[9] y[10] d[1] </args>
        <args> y[9] y[12] d[1] </args>
        <args> y[9] y[14] d[1] </args>
        <args> y[9] y[16] d[1] </args>
        <args> y[9] y[19] d[1] </args>
        <args> y[15] y[0] d[2] </args>
        <args> y[15] y[17] d[2] </args>
        <args> y[15] y[18] d[2] </args>
        <args> y[18] y[0] d[2] </args>
        <args> y[18] y[15] d[2] </args>
        <args> y[18] y[17] d[2] </args>
      </group>
      <group>
        <sum>
          <list> %0 %1 %2 </list>
          <coeffs> 1 -1 -1 </coeffs>
          <condition> (le,-2) </condition>
        </sum>
        <args> y[13] y[2] d[0] </args>
        <args> y[13] y[3] d[0] </args>
        <args> y[13] y[5] d[0] </args>
        <args> y[13] y[8] d[0] </args>
        <args> y[13] y[11] d[0] </args>
        <args> y[14] y[1] d[1] </args>
        <args> y[14] y[4] d[1] </args>
        <args> y[14] y[6] d[1] </args>
        <args> y[14] y[7] d[1] </args>
        <args> y[14] y[9] d[1] </args>
        <args> y[14] y[10] d[1] </args>
        <args> y[14] y[12] d[1] </args>
        <args> y[14] y[16] d[1] </args>
        <args> y[14] y[19] d[1] </args>
        <args> y[16] y[1] d[1] </args>
        <args> y[16] y[4] d[1] </args>
        <args> y[16] y[6] d[1] </args>
        <args> y[16] y[7] d[1] </args>
        <args> y[16] y[9] d[1] </args>
        <args> y[16] y[10] d[1] </args>
        <args> y[16] y[12] d[1] </args>
        <args> y[16] y[14] d[1] </args>
        <args> y[16] y[19] d[1] </args>
        <args> y[17] y[0] d[2] </args>
        <args> y[17] y[15] d[2] </args>
        <args> y[17] y[18] d[2] </args>
      </group>
    </block>
  </constraints>
  <objectives>
    <minimize type="sum"> d[] z </minimize>
  </objectives>
</instance>
